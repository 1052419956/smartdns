smartdns
========
## 使用场景
##### smartdns是python语言编写，基于twisted框架实现的geo dns server，能够支持针对不同的dns请求根据配置返回不同的解析结果。smartdns获取dns请求的源IP或者客户端IP（支持edns协议的请求可以获取客户端IP），根据本地的静态IP库获取请求IP的特性，包括所在的国家、省份、城市、ISP等，然后根据我们的调度配置返回解析结果。
##### smartdns的使用场景：
1. 服务的多机房流量调度，比如电信流量调度到电信机房、联通流量调度到联通机房；
2. 用户访问控制，将用户调度到离用户最近或者链路质量最好的节点上。

##### 举个简单的例子，我们的一个站点test.test.com同时部署在电信和联通两个机房，该站点在电信机房的ip为1.1.1.1、在联通机房的ip为2.2.2.2，就可以通过smartdns做到该站点域名解析时判断源IP为电信的IP时返回1.1.1.1、判断源IP为联通的IP时返回2.2.2.2，从而达到不同运营商机房流量调度的目的。

## 支持的功能
支持A、SOA、NS记录的查询，支持DNS forward功能

## 性能
在虚拟机2.4G CPU上能够处理1000QPS查询请求，打开debug日志后可以到800QPS。3-5台dns server组成的集群已经能够满足大部分站点的需求。

目前我们正在实现和小流量测试go实现的smartdns，能够达到1wQPS以上，后续测试稳定后会开源出来，大家敬请期待：）

## 原理
TODO

## 安装
TODO

## 测试
TODO

## 支持

mail: fangshaosen@xiaomi.com

github: jerryfang8
